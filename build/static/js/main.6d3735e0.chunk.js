(this.webpackJsonpproductsAPP=this.webpackJsonpproductsAPP||[]).push([[1],{117:function(e,t,r){},118:function(e,t,r){"use strict";r.r(t);var n=r(2),c=r(0),a=r(22),u=r.n(a),o=r(21),s=r(13),i=r(60),b=r(8),l=r(20);function j(){var e=Object(s.c)(l.a.getIsAuthenticated);return Object(n.jsx)("nav",{className:"nav",children:e?Object(n.jsx)(o.b,{to:"/products",exact:!0,className:"NavLink",activeClassName:"NavLink--active",children:"Products"}):Object(n.jsx)(o.b,{to:"/",exact:!0,className:"NavLink",activeClassName:"NavLink--active",children:"Home"})})}var d=r(42),O=r.n(d),f=r(37),g=r.p+"static/media/default-avatar.e44fc4e2.png",h=r(134),p=r(136),v=Object(h.a)({root:{background:"linear-gradient(45deg, #f44336 30%, #f44336 90%)",border:0,borderRadius:3,boxShadow:"0 3px 5px 2px rgba(255, 105, 135, .3)",color:"white",height:36,padding:"0 20px"}});function x(e){var t=e.onClick,r=v();return Object(n.jsx)(p.a,{onClick:t,className:r.root,children:"Logout"})}function m(){var e=Object(s.b)(),t=Object(s.c)(l.a.getUsername),r=Object(c.useCallback)((function(){e(f.a.logout())}),[e]);return Object(n.jsxs)("div",{className:O.a.container,children:[Object(n.jsx)("img",{src:g,alt:"",width:"32",className:O.a.avatar}),Object(n.jsxs)("span",{className:O.a.name,children:["Welcome, ",t]}),Object(n.jsx)(x,{onClick:r})]})}var k=function(){return Object(n.jsx)("div",{children:Object(n.jsx)(o.b,{to:"/login",exact:!0,className:"NavLink",activeClassName:"NavLink--active",children:"Log in"})})},S=r(61),E=r.n(S);function C(){var e=Object(s.c)(l.a.getIsAuthenticated);return Object(n.jsxs)("header",{className:E.a.container,children:[Object(n.jsx)(j,{}),e?Object(n.jsx)(m,{}):Object(n.jsx)(k,{})]})}var _=function(e){var t=e.children;return Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)(C,{}),Object(n.jsx)("main",{children:t})]})},U=r(62),P=r.n(U),y=function(e){var t=e.children;return Object(n.jsx)(n.Fragment,{children:Object(n.jsx)("section",{className:P.a.container,children:t})})},R=r(35),N=r(29),T=r(41);function w(e){var t=e.children,r=e.redirectTo,c=Object(T.a)(e,["children","redirectTo"]),a=Object(s.c)(l.a.getIsAuthenticated);return Object(n.jsx)(b.b,Object(N.a)(Object(N.a)({},c),{},{children:a?t:Object(n.jsx)(b.a,{to:r})}))}function q(e){var t=e.children,r=e.restricted,c=void 0!==r&&r,a=e.redirectTo,u=Object(T.a)(e,["children","restricted","redirectTo"]),o=Object(s.c)(l.a.getIsAuthenticated)&&c;return Object(n.jsx)(b.b,Object(N.a)(Object(N.a)({},u),{},{children:o?Object(n.jsx)(b.a,{to:a}):t}))}var A=Object(c.lazy)((function(){return Promise.all([r.e(0),r.e(7)]).then(r.bind(null,152))})),L=Object(c.lazy)((function(){return Promise.all([r.e(0),r.e(6)]).then(r.bind(null,154))})),I=Object(c.lazy)((function(){return Promise.all([r.e(0),r.e(4)]).then(r.bind(null,155))})),z=Object(c.lazy)((function(){return Promise.all([r.e(0),r.e(5)]).then(r.bind(null,156))}));function H(){var e=Object(s.b)();return Object(c.useEffect)((function(){e(f.a.getCurrentUser())}),[e]),Object(n.jsx)(_,{children:Object(n.jsx)(y,{children:Object(n.jsx)(c.Suspense,{fallback:Object(n.jsx)(R.a,{}),children:Object(n.jsxs)(b.d,{children:[Object(n.jsx)(q,{exact:!0,path:"/",restricted:!0,redirectTo:"/products",component:A}),Object(n.jsx)(q,{path:"/login",restricted:!0,redirectTo:"/products",component:L}),Object(n.jsx)(w,{exact:!0,path:"/products",restricted:!0,redirectTo:"/login",component:I}),Object(n.jsx)(w,{exact:!0,path:"/products/:id",redirectTo:"/login",component:z})]})})})})}var F,M,V,B,J,W,Z,X=r(65),D=r(4),G=r(24),K=r(64),Q=r.n(K),Y=r(3),$=r(11),ee=r(16),te=[],re=[],ne=Object(D.c)(te,Object(Y.a)({},ee.g,(function(e,t){return t.payload}))),ce=Object(D.c)(re,Object(Y.a)({},ee.e,(function(e,t){return t.payload}))),ae=Object(D.c)(!1,(F={},Object(Y.a)(F,ee.f,(function(){return!0})),Object(Y.a)(F,ee.g,(function(){return!1})),Object(Y.a)(F,ee.b,(function(){return!1})),Object(Y.a)(F,ee.d,(function(){return!0})),Object(Y.a)(F,ee.e,(function(){return!1})),Object(Y.a)(F,ee.c,(function(){return!1})),F)),ue=function(e,t){return t.payload},oe=Object(D.c)(null,(M={},Object(Y.a)(M,ee.b,ue),Object(Y.a)(M,ee.c,ue),Object(Y.a)(M,ee.a,(function(){return null})),M)),se=Object($.c)({products:ne,loading:ae,error:oe,page:ce}),ie=r(5),be={name:null,email:null},le=Object(D.c)(be,(V={},Object(Y.a)(V,ie.a.loginSuccess,(function(e,t){return t.payload.user})),Object(Y.a)(V,ie.a.logoutSuccess,(function(){return be})),Object(Y.a)(V,ie.a.getCurrentUserSuccess,(function(e,t){return t.payload})),V)),je=Object(D.c)(null,(B={},Object(Y.a)(B,ie.a.loginSuccess,(function(e,t){return t.payload.access_token})),Object(Y.a)(B,ie.a.logoutSuccess,(function(){return null})),B)),de=Object(D.c)(!1,(J={},Object(Y.a)(J,ie.a.loginRequest,(function(){return!0})),Object(Y.a)(J,ie.a.loginSuccess,(function(){return!1})),Object(Y.a)(J,ie.a.loginError,(function(){return!1})),Object(Y.a)(J,ie.a.logoutRequest,(function(){return!0})),Object(Y.a)(J,ie.a.logoutSuccess,(function(){return!1})),Object(Y.a)(J,ie.a.logoutError,(function(){return!1})),Object(Y.a)(J,ie.a.getCurrentUserRequest,(function(){return!0})),Object(Y.a)(J,ie.a.getCurrentUserSuccess,(function(){return!1})),Object(Y.a)(J,ie.a.getCurrentUserError,(function(){return!1})),Object(Y.a)(J,ie.a.clearError,(function(){return!1})),J)),Oe=function(e,t){return t.payload},fe=Object(D.c)(null,(W={},Object(Y.a)(W,ie.a.loginError,(function(){return"Internal server error. Please try later"})),Object(Y.a)(W,ie.a.logoutError,Oe),Object(Y.a)(W,ie.a.getCurrentUserError,Oe),Object(Y.a)(W,ie.a.clearError,(function(){return null})),W)),ge=Object(D.c)(!1,(Z={},Object(Y.a)(Z,ie.a.loginSuccess,(function(){return!0})),Object(Y.a)(Z,ie.a.getCurrentUserSuccess,(function(){return!0})),Object(Y.a)(Z,ie.a.loginError,(function(){return!1})),Object(Y.a)(Z,ie.a.getCurrentUserError,(function(){return!1})),Object(Y.a)(Z,ie.a.logoutSuccess,(function(){return!1})),Z)),he=Object($.c)({user:le,isAuthenticated:ge,token:je,loading:de,error:fe}),pe=Object(X.a)(Object(D.d)({serializableCheck:{ignoredActions:[G.a,G.f,G.b,G.c,G.d,G.e]}})),ve={key:"auth",storage:Q.a,whitelist:["token"]},xe=Object(D.a)({reducer:{auth:Object(G.g)(ve,he),products:se},middleware:pe,devTools:!1}),me={store:xe,persistor:Object(G.h)(xe)};r(117);u.a.render(Object(n.jsx)(s.a,{store:me.store,children:Object(n.jsx)(i.a,{loading:Object(n.jsx)(R.a,{}),persistor:me.persistor,children:Object(n.jsx)(o.a,{children:Object(n.jsx)(H,{})})})}),document.getElementById("root"))},16:function(e,t,r){"use strict";r.d(t,"f",(function(){return c})),r.d(t,"g",(function(){return a})),r.d(t,"b",(function(){return u})),r.d(t,"d",(function(){return o})),r.d(t,"e",(function(){return s})),r.d(t,"c",(function(){return i})),r.d(t,"a",(function(){return b}));var n=r(4),c=Object(n.b)("products/fetchProductsRequest"),a=Object(n.b)("products/fetchProductsSuccess"),u=Object(n.b)("products/fetchProductsError"),o=Object(n.b)("products/fetchProductsPageRequest"),s=Object(n.b)("products/fetchProductsPageSuccess"),i=Object(n.b)("products/fetchProductsPageError"),b=(Object(n.b)("products/changeFilter"),Object(n.b)("products/clearError"))},20:function(e,t,r){"use strict";var n={getIsAuthenticated:function(e){return e.auth.isAuthenticated},getUsername:function(e){return e.auth.user.name},getError:function(e){return e.auth.error},getLoading:function(e){return e.auth.loading},errorLogout:function(e){return e.auth.errorLogout}};t.a=n},30:function(e,t,r){"use strict";r.d(t,"a",(function(){return a})),r.d(t,"b",(function(){return u}));var n=r(25),c=r.n(n);function a(){return{set:function(e){c.a.defaults.headers.common.Authorization="Bearer ".concat(e)},unset:function(){c.a.defaults.headers.common.Authorization=""}}}function u(){return c.a.defaults.baseURL="//dummy-api.d0.acom.cloud"}},35:function(e,t,r){"use strict";var n=r(2),c=(r(0),r(63)),a=r.n(c);t.a=function(){return Object(n.jsx)(a.a,{type:"TailSpin",color:"blue",height:100,width:100,timeout:300})}},37:function(e,t,r){"use strict";var n=r(27),c=r.n(n),a=r(38),u=r(25),o=r.n(u),s=r(30),i=r(5),b=r(48);Object(s.b)();var l={login:function(e){return function(){var t=Object(a.a)(c.a.mark((function t(r){var n;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r(i.a.loginRequest()),t.prev=1,t.next=4,o.a.post("/api/auth/login",e);case 4:n=t.sent,Object(s.a)().set(n.data.token),r(i.a.loginSuccess(n.data)),b.a.info("Welc\u043eme!"),t.next=14;break;case 10:t.prev=10,t.t0=t.catch(1),r(i.a.loginError(t.t0.message)),b.a.error("Internal server error. Please try later");case 14:case"end":return t.stop()}}),t,null,[[1,10]])})));return function(e){return t.apply(this,arguments)}}()},logout:function(){return function(){var e=Object(a.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t(i.a.logoutRequest());try{Object(s.a)().unset(),t(i.a.logoutSuccess())}catch(r){t(i.a.logoutError(r.message))}case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},getCurrentUser:function(){return function(){var e=Object(a.a)(c.a.mark((function e(t,r){var n,a,u;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=r(),a=n.auth.token){e.next=3;break}return e.abrupt("return");case 3:return Object(s.a)().set(a),t(i.a.getCurrentUserRequest()),e.prev=5,e.next=8,o.a.get("/api/auth/user-profile");case 8:u=e.sent,t(i.a.getCurrentUserSuccess(u.data)),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(5),t(i.a.getCurrentUserError(e.t0.message)),t(i.a.logoutSuccess());case 16:case"end":return e.stop()}}),e,null,[[5,12]])})));return function(t,r){return e.apply(this,arguments)}}()}};t.a=l},42:function(e,t,r){e.exports={container:"UserMenu_container__1XvVt",avatar:"UserMenu_avatar__1mPjy",name:"UserMenu_name__2swbV",button:"UserMenu_button__3P9kS"}},5:function(e,t,r){"use strict";var n=r(4),c={getRefreshTokenStart:Object(n.b)("auth/getRefreshTokenStart"),getRefreshTokenSuccess:Object(n.b)("auth/getRefreshTokenSuccess"),getRefreshTokenError:Object(n.b)("auth/getRefreshTokenError"),loginSuccess:Object(n.b)("auth/loginSuccess"),loginRequest:Object(n.b)("auth/loginRequest"),loginError:Object(n.b)("auth/loginError"),logoutRequest:Object(n.b)("auth/logoutRequest"),logoutSuccess:Object(n.b)("auth/logoutSuccess"),logoutError:Object(n.b)("auth/logoutError"),getCurrentUserRequest:Object(n.b)("auth/getCurrentUserRequest"),getCurrentUserSuccess:Object(n.b)("auth/getCurrentUserSuccess"),getCurrentUserError:Object(n.b)("auth/getCurrentUserError"),clearError:Object(n.b)("auth/clearError")};t.a=c},61:function(e,t,r){e.exports={container:"Header_container__23l0_",appear:"Header_appear__8HZuO",appearActive:"Header_appearActive__2VP2F"}},62:function(e,t,r){e.exports={container:"Section_container__2Ld6Z"}}},[[118,2,3]]]);
//# sourceMappingURL=main.6d3735e0.chunk.js.map